{% extends 'base.html' %}

{% block title %}Reservation #{{ reservation.pk }} — Jaime's Private Resort{% endblock %}

{% block content %}
<div class="page-header">
    <div class="container">
        <h1>Reservation Details</h1>
        <p>Booking #{{ reservation.pk }}</p>
    </div>
</div>

<section class="section">
    <div class="container">
        <div class="reservation-detail-card">
            <h2>
                <i class="fas fa-bookmark"></i> Reservation #{{ reservation.pk }}
                <span class="status-badge status-badge--{{ reservation.status }}" style="margin-left:var(--space-sm);">
                    {{ reservation.get_status_display }}
                </span>
            </h2>

            <div class="detail-row">
                <span class="detail-label">Facility</span>
                <span class="detail-value">
                    <a href="{% url 'facilities:detail' slug=reservation.facility.slug %}">{{ reservation.facility.name
                        }}</a>
                </span>
            </div>
            <div class="detail-row">
                <span class="detail-label">Check-In</span>
                <span class="detail-value">{{ reservation.check_in|date:"F j, Y" }}</span>
            </div>
            <div class="detail-row">
                <span class="detail-label">Check-Out</span>
                <span class="detail-value">{{ reservation.check_out|date:"F j, Y" }}</span>
            </div>
            <div class="detail-row">
                <span class="detail-label">Duration</span>
                <span class="detail-value">{{ reservation.duration_days }} day{{ reservation.duration_days|pluralize
                    }}</span>
            </div>
            <div class="detail-row">
                <span class="detail-label">Guests</span>
                <span class="detail-value">{{ reservation.guests }}</span>
            </div>
            {% if reservation.special_requests %}
            <div class="detail-row">
                <span class="detail-label">Special Requests</span>
                <span class="detail-value">{{ reservation.special_requests }}</span>
            </div>
            {% endif %}
            <div class="detail-row" style="font-size:1.1rem;">
                <span class="detail-label" style="font-size:1.1rem;">Total Price</span>
                <span class="detail-value" style="font-weight:700; color:var(--color-primary);">₱{{
                    reservation.total_price|floatformat:2 }}</span>
            </div>

            <div class="detail-actions">
                {% if reservation.status == 'pending' or reservation.status == 'confirmed' %}
                <a href="{% url 'payments:initiate' reservation_pk=reservation.pk %}" class="btn btn-success">
                    <i class="fas fa-credit-card"></i> Pay Now
                </a>
                <a href="{% url 'reservations:cancel' pk=reservation.pk %}" class="btn btn-danger">
                    <i class="fas fa-times-circle"></i> Cancel
                </a>
                {% endif %}
                <a href="{% url 'reservations:my_reservations' %}" class="btn btn-outline">
                    <i class="fas fa-list"></i> My Bookings
                </a>
            </div>
        </div>
    </div>
</section>
{% endblock %}